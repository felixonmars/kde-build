#!/bin/bash

cd build

broken=''

for i in `cat ../kde-dep-packages`; do
	cd ${i}/trunk
	makepkg -isLc --noconfirm || exit 1
	cd ../..
done

for i in `cat ../kde-opt-packages`; do
	cd ${i}/trunk
	makepkg -sLc --noconfirm || broken="${broken} ${i}"
	cd ../..
done

for i in `cat ../kde-l10n-names`; do
	pkglang=$(echo "${i}" | tr [:upper:] [:lower:])
	cd kde-l10n-${pkglang}/trunk
	makepkg -sLc --noconfirm || broken="${broken} kde-l10n-${pkglang}"
	cd ../..
done

cd ..

if [ "${broken}" != "" ]; then
	echo "Broken packages: ${broken}"
fi
